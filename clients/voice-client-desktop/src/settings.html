<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings</title>
    <link rel="stylesheet" href="./theme.css" />
    <link rel="stylesheet" href="./settings.css" />
    <script type="module" src="./settings.ts" defer></script>
  </head>
  <body>
    <div class="settings">
      <header class="settings-header">
        <h1>Settings</h1>
      </header>

      <div class="settings-content">
        <section class="settings-section">
          <h2>Connection</h2>
          <div class="form-group">
            <label for="gateway-url">Gateway URL</label>
            <input type="text" id="gateway-url" placeholder="http://127.0.0.1:18790/voice-client" />
          </div>
          <div class="form-group">
            <label for="token">Token</label>
            <input type="password" id="token" placeholder="Optional authentication token" />
            <div class="form-hint">Token is stored securely using OS keychain</div>
          </div>
          <button id="test-connection" class="test-button">Test Connection</button>
          <div id="test-result" class="test-result" style="display: none;"></div>
        </section>

        <section class="settings-section">
          <h2>Profile</h2>
          <div class="form-group">
            <label for="profile-name">Profile Name</label>
            <input type="text" id="profile-name" placeholder="Your name (e.g. Alice)" />
          </div>
          <div class="form-group">
            <label for="session-key">Session Key</label>
            <input type="text" id="session-key" placeholder="agent:main:main" />
            <div class="form-hint">Run 'openclaw sessions' on the server to find your session key. This allows the voice agent to share memory and context with your main chat session.</div>
          </div>
        </section>

        <section class="settings-section">
          <h2>Audio</h2>
          <div class="form-group">
            <label for="microphone-device">Microphone Device</label>
            <select id="microphone-device">
              <option value="">Default Microphone</option>
            </select>
          </div>
        </section>

        <section class="settings-section">
          <h2>Hotkey</h2>
          <div class="form-group">
            <label for="push-to-talk-hotkey">Push-to-Talk Hotkey</label>
            <input type="text" id="push-to-talk-hotkey" placeholder="Click to record hotkey (e.g. Control+Space)" />
            <div class="form-hint">Global hotkey to activate microphone.</div>
          </div>
        </section>
      </div>

      <footer class="settings-footer">
        <button id="save-settings" class="save-button">Save Settings</button>
      </footer>
    </div>
  </body>
</html>
